<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>SDU Cafeteria</title>
    <!-- materialize icons, css & js -->
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link type="text/css" href="css/styles.css" rel="stylesheet">
    <link rel="manifest" type="application/manifest+json" href="manifest.webmanifest">

    <!--iOS support-->
    <link rel="apple-touch-icon" href="/img/icons/icon-96x96.png">
    <meta name="apple-mobile-wep-app-status-bar" content="#aa7700">

    <meta name="theme-color" content="#FFE1C4">

    <!-- Application styles -->
    <link type="text/css" href="css/sections/menu.css" rel="stylesheet">
    <link type="text/css" href="css/sections/favorites.css" rel="stylesheet">
    <link type="text/css" href="css/sections/filters.css" rel="stylesheet">


</head>
<body class="grey lighten-4">

<!-- top nav -->
<nav class="z-depth-0">
    <div class="nav-wrapper container">
        <a href="#">SDU<span>Cafeteria</span></a>
        <span class="left grey-text text-darken-1">
            <i class="material-icons sidenav-trigger" data-target="side-menu">menu</i>
        </span>
    </div>
</nav>

<!-- side nav -->
<ul id="side-menu" class="sidenav side-menu">
    <li><a href="index.html" class="subheader">SDU-CAFETERIA</a></li>
    <div>
        <a class="menu sidenav-close" data-id="${id}">
            <i class="material-icons">local_dining</i>Menu
        </a>
    </div>
    <div>
        <a class="filters sidenav-close" data-id="${id}">
            <i class="material-icons">filter_alt</i>Filters
        </a>
    </div>
    <div>
        <a class="favorites sidenav-close" data-id="${id}">
            <i class="material-icons">favorite</i>Favorites
        </a>
    </div>
    <div>
        <a class="notifications sidenav-close" data-id="${id}">
            <i class="material-icons">notifications</i>Notify
        </a>
    </div>

    <div>
        <a href="admin/admin.html">
            <i class="material-icons">developer_board</i>Admin
        </a>
    </div>

    <!-- ================== JAKOBS HERUNDER =======  -->
    <!--<div class="notifications container white grey-text text-darken-1">
        <h5>Notify</h5>
        <div>
            <form action="#">
                <p>
                    <label>
                        <input type="checkbox" class="filled-in" />
                        <span>Favorites</span>
                    </label>
                </p>
                <p>
                    <label>
                        <input type="checkbox" class="filled-in" />
                        <span>Vegan</span>
                    </label>
                </p>
                <p>
                    <label>
                        <input type="checkbox" class="filled-in" />
                        <span>Vegatarian</span>
                    </label>
                </p>
                <p>
                    <label>
                        <input type="checkbox" class="filled-in" />
                        <span>Halal</span>
                    </label>
                </p>
            </form>
        </div>
        <hr>
    </div>
    <div class="preferences container white grey-text text-darken-1">
        <h5>Diet Preferences</h5>
        <div>
            <form action="#">
                <p>
                    <label>
                        <input type="checkbox" class="filled-in" />
                        <span>Vegetarian</span>
                    </label>
                </p>
                <p>
                    <label>
                        <input type="checkbox" class="filled-in" />
                        <span>Vegan</span>
                    </label>
                </p>
                <p>
                    <label>
                        <input type="checkbox" class="filled-in" />
                        <span>Halal</span>
                    </label>
                </p>
            </form>
        </div>
        <hr>
        <h5>Allergies</h5>
        <div>
            <form action="#">
                <p>
                    <label>
                        <input type="checkbox" class="filled-in" />
                        <span>Shellfish</span>
                    </label>
                </p>
                <p>
                    <label>
                        <input type="checkbox" class="filled-in" />
                        <span>Nut</span>
                    </label>
                </p>
            </form>
        </div>
    </div>
-->
    <!-- =================== SLUT JAKOB ================== -->


    <!--<li><a href="index.html" class="subheader">SDU-CAFETERIA</a></li>
    <li><a href="#" class="waves-effect"><i class="material-icons">filter_alt</i>Filter</a></li>
    <li><a href="#" class="waves-effect"><i class="material-icons">favorite</i>Favorites</a></li>
    <li><a href="#" class="waves-effect"><i class="material-icons">notifications</i>Notify</a></li>-->
</ul>

<div id="food_items" class="container grey-text text-darken-1">
    <h5 class="center">Menu</h5>
    <div id="food_category_news" class="food_category container grey-text text-darken-1">
        <h6>News</h6>
    </div>
    <div id="food_category_daily" class="food_category container grey-text text-darken-1">
        <h6>Daily</h6>
    </div>
    <div id="food_category_drinks" class="food_category container grey-text text-darken-1">
        <h6>Drinks</h6>
    </div>
</div>

<div  id="favorites" class="container grey-text text-darken-1">
    <h5 class="center">Favorites</h5>
</div>

<div class="filters container grey-text text-darken-1" id="filters">
  <h5 class="center">Filters</h5>
  <div class="filters card-panel white row">
    <form action="#">
        <p>
            <label>
                <input type="checkbox" class="vegetarian filter-check filled-in" id="vegetarian" onclick="checkboxClicked('vegetarian')"></input>
                <span>Vegetarian</span>
            </label>
        </p>
        <p>
            <label>
                <input type="checkbox" class="vegan filter-check filled-in" id="vegan" onclick="checkboxClicked('vegan')"></input>
                <span>Vegan</span>
            </label>
        </p>
        <p>
            <label>
                <input type="checkbox" class="halal filter-check filled-in" id="halal" onclick="checkboxClicked('halal')"></input>
                <span>Halal</span>
            </label>
        </p>
        <p>
            <label>
                <input type="checkbox" class="meat filter-check filled-in" id="meat" onclick="checkboxClicked('meat')"></input>
                <span>Meat Lover</span>
            </label>
        </p>
        <p>
            <label>
                <input type="checkbox" class="seafood filter-check filled-in" id="seafood" onclick="checkboxClicked('seafood')"></input>
                <span>Sea Food</span>
            </label>
        </p>
        <p>
            <label>
                <input type="checkbox" class="shellfish filter-check filled-in" id="shellfish" onclick="checkboxClicked('shellfish')"></input>
                <span>Shell-fish Allergy</span>
            </label>
        </p>
        <p>
            <label>
                <input type="checkbox" class="nuts filter-check filled-in" id="nuts" onclick="checkboxClicked('nuts')"></input>
                <span>Nuts Allergy</span>
            </label>
        </p>
        <p>
            <label>
                <input type="checkbox" class="lactose filter-check filled-in" id="lactose" onclick="checkboxClicked('lactose')"></input>
                <span>Lactose Intolerance</span>
            </label>
        </p>
    </form>
  </div>
  <div id="filtered" class="container grey-text text-darken-1">
    <h6 class="center">Filtered:</h6>
</div>
</div>


<div class="notifications container grey-text text-darken-1" id="notifications">
    <h5 class="center">Notifications</h5>
    <div class="notifications card-panel white row">
        <form action="#">
            <p>
                <label>
                    <input type="checkbox" class="filled-in notification_checkbox" id="notification_vegetarian"
                           name="vegetarian"/>
                    <span class="notification_setting">Vegetarian</span>
                </label>
            </p>
            <p>
                <label>
                    <input type="checkbox" class="filled-in notification_checkbox" id="notification_vegan"
                           name="vegan"/>
                    <span class="notification_setting">Vegan</span>
                </label>
            </p>
            <p>
                <label>
                    <input type="checkbox" class="filled-in notification_checkbox" id="notification_favorites"
                           name="favorites"/>
                    <span class="notification_setting">Favorites</span>
                </label>
            </p>
        </form>
    </div>
</div>

<!-- recipes -->
<div class="center" id="add">
    <a class="btn-floating btn-small btn-large add-btn sidenav-trigger" data-target="side-form">
        <i class="material-icons">add</i>
    </a>
</div>
<br><br>
<div class="center" id="logout">
    <button class="btn-large" id="btnLogout">Logout</button>
    <p>NOTE: Logout changes uid</p>
    <br>
    <span id="user_id"></span>
    <br>
    <div id="user_info"></div>
</div>
<br><br>
<div class="center">
    <button class="btn-large call" id="btnTest">Test callable function</button>
</div>


<br>
<hr>
<br>


<!-- add recipe side nav -->
<div id="side-form" class="sidenav side-form">
    <form class="add-recipe container section">
        <h6>New Recipe</h6>
        <div class="divider"></div>
        <div class="input-field">
            <input placeholder="e.g. Ninja soup" id="title" type="text" class="validate">
            <label for="title">Recipe Title</label>
        </div>
        <div class="input-field">
            <input placeholder="e.g. Tofu, mushroom, garlic" id="ingredients" type="text" class="validate">
            <label for="ingredients">Ingredients</label>
        </div>
        <div class="input-field center">
            <button class="btn-small">Add</button>
        </div>
    </form>
</div>

<div class="favorites container grey-text text-darken-1" id="favorites">
    <h5 class="center">Favorites</h5>
</div>

<div id="filters">
    <h5 class="center">Filters</h5>
    <form action="#">
        <p>
            <label>
                <input type="checkbox" class="filled-in"/>
                <span>Vegetarian</span>
            </label>
        </p>
        <p>
            <label>
                <input type="checkbox" class="filled-in"/>
                <span>Vegan</span>
            </label>
        </p>
        <p>
            <label>
                <input type="checkbox" class="filled-in"/>
                <span>Halal</span>
            </label>
        </p>
        <p>
            <label>
                <input type="checkbox" class="filled-in"/>
                <span>Shell-fish allergy</span>
            </label>
        </p>
    </form>
</div>


<script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>

<!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-functions.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-messaging.js"></script>



<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
<script src="https://www.gstatic.com/firebasejs/7.24.0/firebase-analytics.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.24.0/firebase-auth.js"></script>

<script>
    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    var firebaseConfig = {
        apiKey: "AIzaSyAFl469L0-MjT-zsmG8y0F8xgsPJpKRDV4",
        authDomain: "stl-e20.firebaseapp.com",
        databaseURL: "https://stl-e20.firebaseio.com",
        projectId: "stl-e20",
        storageBucket: "stl-e20.appspot.com",
        messagingSenderId: "779712017147",
        appId: "1:779712017147:web:1d95a4e8fc851d9375765e",
        measurementId: "G-61P2PH6C0N"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    firebase.analytics();
    const db = firebase.firestore();
    const auth = firebase.auth();
    const messaging = firebase.messaging();
    const init_messaging = () => {
        messaging.requestPermission()
            .then(() => {
                console.log('Permission obtained.');
                return messaging.getToken();
            })
            .then((token) => {
                console.log('token: ', token);
                //do stuff with token
            })
            .catch(err => {
                console.log('Error: ', err);
            });

        messaging.onMessage((payload) => {
            console.log('Received message: ', payload);
        });

        messaging.onTokenRefresh(() => {
            messaging.getToken()
                .then(newToken => {
                    console.log('New token: ', newToken);
                })
                .catch(err => {
                    console.log(err);
                });
        });
    };
    init_messaging();

    messaging.getToken({vapidKey: 'BGC_e_OwtXp5_v8nCtzUGbWe_Re3v_gVrXyIc8xFdjbtSw2ykrmwIr6djPKXcpiBAfXaqFL9Ykz7Zvug9WKWpDs'}).then((currentToken) => {
        if (currentToken) {
            sendTokenToServer(currentToken);
            updateUIForPushEnabled(currentToken);
        } else {
            // Show permission request.
            console.log('No registration token available. Request permission to generate one.');
            // Show permission UI.
            updateUIForPushPermissionRequired();
            setTokenSentToServer(false);
        }
    }).catch((err) => {
        console.log('An error occurred while retrieving token. ', err);
        showToken('Error retrieving registration token. ', err);
        setTokenSentToServer(false);
    });
</script>
<script src="js/auth.js"></script>
<script defer src="js/db.js"></script>
<script defer src="js/app.js"></script>

<script defer src="js/sections/menu.js"></script>
<script defer src="js/sections/favorites.js"></script>
<script defer src="js/sections/notifications.js"></script>
<script defer src="js/sections/filters.js"></script>

</body>
</html>
